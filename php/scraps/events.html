<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	
<div class="event"><a href="" id="event-link"><h3 class="event-title"></a>
	<div class="event-details">
		<div class="event-location"><a href="" class="event-location-link"></a></div>
		<div class="event-date"></div>
		<div class="event-time"></div>
	</div>
</div>

<script>
var monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "June",  "July", "Aug", "Sep", "Oct", "Nov", "Dec"];
$(document).ready(function() {
    //feed to parse
    var feed = "https://chipublib.bibliocommons.com/events/events/rss/all?nocache=";
    $.ajax(feed, {
        accepts:{
            xml:"application/rss+xml"
        },
        dataType:"xml",
        success:function(data) {
        	for (i = 0; i < 5; i++) {
        		const event = new Object();
        		$(data).find("item").each(function () {
        			var el = $(this);
        		event.title = el.find("title").text();
        		event.link = el.find("link").text();
        		event.location = el.find("bc\\:name").text();
					var eventTime = new Date(el.find("bc\\:start_date").text());
					var monthName = monthNames[eventTime.getMonth()];
        		event.monthDay = monthName + " " + eventTime.getDate();
					var hours = eventTime.getHours();
					var minutes = eventTime.getMinutes();
					var ampm = hours >= 12 ? 'PM' : 'AM';
					hours = hours % 12;
					hours = hours ? hours : 12; // the hour '0' should be '12'
					minutes = minutes < 10 ? '0'+minutes : minutes;
					var strTime = hours + ':' + minutes + ampm;
        		event.time = hours + ':' + minutes + ampm;
        		});
        		console.log(event);
    		};
    	}
    });
});
	            //Credit: http://stackoverflow.com/questions/10943544/how-to-parse-an-rss-feed-using-javascript
				     //        $(data).find("item").each(function () { // or "item" or whatever suits your feed
				     //            var el = $(this);
				     //        	var eventTime = new Date(el.find("bc\\:start_date").text());
				     //            //month day
					    //         	var monthName = monthNames[eventTime.getMonth()];
					    //             console.log(monthName + " " + eventTime.getDate());
				     //            // hour minute am/pm
									// var hours = eventTime.getHours();
									// var minutes = eventTime.getMinutes();
									// var ampm = hours >= 12 ? 'PM' : 'AM';
									// hours = hours % 12;
									// hours = hours ? hours : 12; // the hour '0' should be '12'
									// minutes = minutes < 10 ? '0'+minutes : minutes;
									// var strTime = hours + ':' + minutes + ampm;
				     //            console.log(strTime);
				     //            console.log("------------------------");
				     //            console.log("title      : " + el.find("title").text());
				     //            console.log("location:      : " + el.find("bc\\:location").text());
				     //            // link
					    //             console.log("link       : " + el.find("link").text());
					    //             var strLink = el.find("link").text();
					    //             document.getElementById("event-link").setAttribute("href",strLink);
				     //        });
// 	        }
//         }   
//     });
// });

</script>


</body>
</html>